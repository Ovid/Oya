## **How the Architecture Page is Generated**

The architecture page is generated by the ArchitectureGenerator class, which supports two modes: synthesis mode (preferred) and legacy mode (fallback). When a SynthesisMap is available, it uses synthesis mode. architecture.py:21-24

The orchestrator's \_run\_architecture() method passes the SynthesisMap to the generator: orchestrator.py:682-688

## **What Context the SynthesisMap Provides**

The SynthesisMap provides comprehensive architectural context through its structure: summaries.py:196-214

When generating the architecture prompt, this data is formatted into:

* System Layers: Each layer's purpose, directories, and files  
* Key Components: The 5-15 most important classes/functions with their roles and layers  
* Dependency Graph: Which layers/components depend on which others  
* Project Summary: A 2-3 sentence overview of what the project does prompts.py:658-668

The architecture prompt template specifically instructs the LLM to create comprehensive documentation including layer architecture, component diagrams, data flow, and design patterns: prompts.py:198-233

## **Is the SynthesisMap Suitable?**

The SynthesisMap is designed to be suitable for architecture documentation. It's built from structured summaries extracted during phases 2-3, which capture:

From FileSummaries: summaries.py:40-63

From DirectorySummaries: summaries.py:106-123

The synthesis process uses the LLM to identify the most architecturally significant components: prompts.py:84-94

## **How to Improve It**

If you feel the SynthesisMap doesn't provide enough context, here are several ways to enhance it:

1. Improve File Summaries: The SynthesisMap is only as good as the file and directory summaries it synthesizes. Make sure the file documentation phase (Phase 2\) is capturing rich context with clear purposes, accurate layer classifications, and comprehensive dependency lists.  
2. Enhance the Synthesis Prompt: You can modify the SYNTHESIS\_TEMPLATE to ask the LLM to extract more specific architectural information. Currently it asks for 5-15 key components, but you could:  
   * Request more components  
   * Ask for architectural patterns explicitly  
   * Request cross-cutting concerns  
   * Ask for performance-critical components prompts.py:54-96  
3. Add More Fields to SynthesisMap: You could extend the SynthesisMap dataclass to include additional architectural metadata like:  
   * Design patterns used  
   * Performance bottlenecks  
   * Security boundaries  
   * External integration points summaries.py:196-214  
4. Provide Additional Context: The architecture generator also receives the file tree and external dependencies, which supplement the SynthesisMap. You could add more supplementary context sources if needed. orchestrator.py:664-700

## **Notes**

The synthesis mode is explicitly marked as "preferred" in the code comments, indicating it was designed to be the primary approach. The legacy mode using raw symbols exists only as a fallback. If the architecture documentation isn't meeting your needs, I'd recommend starting by examining what's being captured in your file summaries (check the YAML blocks at the top of generated file pages) and then consider enhancing the synthesis prompt to extract the specific architectural information you need  
